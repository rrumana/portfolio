<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Kubernetes Homelab | Ryan Rumana</title><meta name="description" content="Two-node k3s platform with GitOps, Longhorn storage, and a LibreChat + llama.cpp AI stack that powers my day-to-day workflows."><link rel="stylesheet" href="/_astro/_slug_.N9Id27hQ.css">
<link rel="stylesheet" href="/_astro/_slug_.BPL-THP4.css">
<style>.heading[data-astro-cid-goh2lvqm]{font-weight:700;line-height:var(--line-height-tight);color:var(--color-text-default)}.heading--sm[data-astro-cid-goh2lvqm]{font-size:var(--font-size-lg)}.heading--md[data-astro-cid-goh2lvqm]{font-size:var(--font-size-xl)}.heading--lg[data-astro-cid-goh2lvqm]{font-size:var(--font-size-2xl)}.heading--xl[data-astro-cid-goh2lvqm]{font-size:var(--font-size-3xl)}.heading--2xl[data-astro-cid-goh2lvqm]{font-size:var(--font-size-4xl)}.heading--3xl[data-astro-cid-goh2lvqm]{font-size:clamp(2.5rem,5vw,3.5rem)}.heading--4xl[data-astro-cid-goh2lvqm]{font-size:clamp(3rem,6vw,4rem)}.text[data-astro-cid-jsr45nuq]{font-size:var(--font-size-md);line-height:var(--line-height-normal);color:var(--color-text-default)}.text--sm[data-astro-cid-jsr45nuq]{font-size:var(--font-size-sm)}.text--md[data-astro-cid-jsr45nuq]{font-size:var(--font-size-md)}.text--lg[data-astro-cid-jsr45nuq]{font-size:var(--font-size-lg)}.text--muted[data-astro-cid-jsr45nuq]{color:var(--color-text-muted)}.text--accent[data-astro-cid-jsr45nuq]{color:var(--color-accent-500)}.button[data-astro-cid-6ygtcg62]{display:inline-flex;align-items:center;justify-content:center;gap:var(--space-xs);font-weight:600;border-radius:var(--radius-sm);padding-inline:var(--space-lg);padding-block:var(--space-sm);transition:transform .15s ease,box-shadow .15s ease,background .15s ease,color .15s ease;text-decoration:none}.button--sm[data-astro-cid-6ygtcg62]{padding-inline:var(--space-md);padding-block:var(--space-xs);font-size:var(--font-size-sm)}.button--primary[data-astro-cid-6ygtcg62]{background:linear-gradient(135deg,var(--color-primary-500),var(--color-accent-500));color:#1c2332;box-shadow:var(--shadow-sm)}.button--primary[data-astro-cid-6ygtcg62]:hover,.button--primary[data-astro-cid-6ygtcg62]:focus-visible{transform:translateY(-1px);box-shadow:var(--shadow-md);color:#1c2332}html[data-theme=dark] .button--primary[data-astro-cid-6ygtcg62],html[data-theme=dark] .button--primary[data-astro-cid-6ygtcg62]:hover,html[data-theme=dark] .button--primary[data-astro-cid-6ygtcg62]:focus-visible{color:#1c2332}.button--secondary[data-astro-cid-6ygtcg62]{background:var(--color-surface-100);color:var(--color-text-default);border:1px solid var(--color-border-subtle)}.button--secondary[data-astro-cid-6ygtcg62]:hover,.button--secondary[data-astro-cid-6ygtcg62]:focus-visible{background:var(--color-surface-200)}.button--ghost[data-astro-cid-6ygtcg62]{background:transparent;color:var(--color-text-default)}.button--ghost[data-astro-cid-6ygtcg62]:hover,.button--ghost[data-astro-cid-6ygtcg62]:focus-visible{background:var(--color-fill-primary-soft)}.button--link[data-astro-cid-6ygtcg62]{padding:0;background:none;color:var(--color-primary-500)}.button--link[data-astro-cid-6ygtcg62]:hover,.button--link[data-astro-cid-6ygtcg62]:focus-visible{text-decoration:underline}.button--icon[data-astro-cid-6ygtcg62]{padding-inline:var(--space-sm)}
.badge[data-astro-cid-xy2miwgi]{display:inline-flex;align-items:center;gap:var(--space-2xs);padding:var(--space-2xs) var(--space-sm);border-radius:var(--radius-xs);font-size:var(--font-size-xs);font-weight:600;letter-spacing:.03em;text-transform:uppercase}.badge__icon[data-astro-cid-xy2miwgi]{font-size:1.1em}.badge--default[data-astro-cid-xy2miwgi]{background:var(--color-fill-neutral-soft);color:var(--color-text-muted)}.badge--accent[data-astro-cid-xy2miwgi]{background:var(--color-fill-accent-soft);color:var(--color-accent-500)}.badge--neutral[data-astro-cid-xy2miwgi]{background:var(--color-fill-primary-soft);color:var(--color-primary-500)}
</style></head> <body> <header class="site-header" data-astro-cid-f7gxlddy> <div class="container site-header__inner" data-astro-cid-f7gxlddy>  <a class="site-header__brand" href="/" data-astro-cid-f7gxlddy>Ryan Rumana</a> <div class="site-header__right" data-astro-cid-f7gxlddy> <nav class="primary-nav" aria-label="Main navigation" data-astro-cid-zrsf3zt6> <ul data-astro-cid-zrsf3zt6> <li data-astro-cid-zrsf3zt6><a href="/" data-astro-cid-zrsf3zt6>Home</a></li><li data-astro-cid-zrsf3zt6><a href="/#projects" data-astro-cid-zrsf3zt6>Projects</a></li><li data-astro-cid-zrsf3zt6><a href="#tech" data-astro-cid-zrsf3zt6>Tech</a></li><li data-astro-cid-zrsf3zt6><a href="#details" data-astro-cid-zrsf3zt6>Details</a></li> </ul> </nav>  <button class="theme-toggle" type="button" data-theme-toggle aria-label="Toggle theme" aria-pressed="false" data-astro-cid-lfoluaxz> <span class="theme-toggle__icon theme-toggle__icon--sun" aria-hidden="true" data-astro-cid-lfoluaxz>ðŸŒž</span> <span class="theme-toggle__icon theme-toggle__icon--moon" aria-hidden="true" data-astro-cid-lfoluaxz>ðŸŒ™</span> <span class="theme-toggle__label" data-astro-cid-lfoluaxz>Toggle theme</span> </button> <script>
  const storageKey = 'rr-theme';
  const root = document.documentElement;
  const toggleBtn = document.querySelector('[data-theme-toggle]');

  const applyTheme = (theme) => {
    if (theme) {
      root.setAttribute('data-theme', theme);
    } else {
      root.removeAttribute('data-theme');
    }
    if (toggleBtn) {
      const isDark = (theme ?? root.getAttribute('data-theme')) === 'dark';
      toggleBtn.setAttribute('aria-pressed', String(isDark));
      toggleBtn.classList.toggle('is-dark', isDark);
    }
  };

  const storedTheme = localStorage.getItem(storageKey);
  if (storedTheme) {
    applyTheme(storedTheme);
  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
    applyTheme('dark');
  }

  if (toggleBtn) {
    toggleBtn.addEventListener('click', () => {
      const current = root.getAttribute('data-theme');
      const nextTheme = current === 'dark' ? 'light' : 'dark';
      applyTheme(nextTheme === 'light' ? '' : 'dark');
      if (nextTheme === 'light') {
        localStorage.removeItem(storageKey);
      } else {
        localStorage.setItem(storageKey, 'dark');
      }
    });
  }

  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => {
    if (!localStorage.getItem(storageKey)) {
      applyTheme(event.matches ? 'dark' : 'light');
    }
  });
</script>  </div>  </div> </header>   <main class="project" data-astro-cid-eo3wme6m> <section class="project__hero" data-astro-cid-eo3wme6m> <div class="container project__hero-inner" data-astro-cid-eo3wme6m>  <div class="project__heading" data-astro-cid-eo3wme6m> <p class="project__eyebrow" data-astro-cid-eo3wme6m>Project</p> <h1 class="heading heading--3xl" data-astro-cid-eo3wme6m data-astro-cid-goh2lvqm> Kubernetes Homelab </h1>  <p class="text text--muted text--lg" data-astro-cid-eo3wme6m data-astro-cid-jsr45nuq> Two-node k3s platform with GitOps, Longhorn storage, and a LibreChat + llama.cpp AI stack that powers my day-to-day workflows. </p>  <div class="project__actions" data-astro-cid-eo3wme6m> <a class="button button--primary button--md" href="/projects/kubernetes-homelab" data-astro-cid-eo3wme6m data-astro-cid-6ygtcg62>Read more</a><a class="button button--primary button--md" href="https://github.com/rrumana/k8s-homelab" data-astro-cid-eo3wme6m data-astro-cid-6ygtcg62>View repo</a> </div> </div> <div class="project__media" data-astro-cid-eo3wme6m> <img src="/images/homelab.png" alt="Homelab rack" loading="lazy" data-astro-cid-eo3wme6m> </div> </div> </section> <div class="container project__meta" id="tech" data-astro-cid-eo3wme6m>  <h2 data-astro-cid-eo3wme6m>Tech Stack</h2> <ul data-astro-cid-eo3wme6m> <li data-astro-cid-eo3wme6m>Kubernetes</li><li data-astro-cid-eo3wme6m>GitOps</li><li data-astro-cid-eo3wme6m>Longhorn</li><li data-astro-cid-eo3wme6m>Rust</li> </ul>  </div> <article class="project__content" data-astro-cid-eo3wme6m> <div class="container project__content-inner" data-astro-cid-eo3wme6m>   <section id="details" class="project-section" data-astro-cid-ovxcmftc> <h2 id="why-it-exists">Why it exists</h2>
<p>I wanted production-grade reliability at home, not just a pile of containers. The homelab runs on a
two-node k3s cluster with GitOps from day one, so every change is reviewed, versioned, and self-healing.
It keeps my media workflow, password management, AI experiments, and personal sites online.</p>
<h2 id="platform-architecture">Platform architecture</h2>
<ul>
<li><strong>GitOps:</strong> Argo CD app-of-apps reconciles infrastructure, platform services, and applications.</li>
<li><strong>Networking:</strong> Cloudflare front door, MetalLB for load balancing, and HAProxy ingress classes for
public vs. restricted apps.</li>
<li><strong>Storage:</strong> Longhorn provides replicated PVCs with hourly snapshots and nightly NAS backups.</li>
<li><strong>AI stack:</strong> Migrated from Ollama/OpenWebUI to <code>llama.cpp</code> + LibreChat, backed by MongoDB and Qdrant
so it scales cleanly across nodes.</li>
</ul>
<h2 id="reliability-upgrades">Reliability upgrades</h2>
<p>Critical services (HAProxy, CoreDNS, cert-manager, LibreChat, Vaultwarden, portfolio) run with
anti-affinity, PDBs, and multi-replica deployments. Test workloads in <code>platform/test</code> validate new
nodes and ingress paths before production apps land.</p>
<h2 id="whats-next">Whatâ€™s next</h2>
<p>Finishing the migration to dark-mode aware UI, expanding network policies, and standing up the LGTM
observability stack once HA work settles.</p> </section>  <div class="project__sections" data-astro-cid-eo3wme6m> <section class="homelab-overview" data-astro-cid-gktyngjq> <div class="homelab-overview__grid" data-astro-cid-gktyngjq> <article class="panel" data-astro-cid-gktyngjq> <span class="badge badge--accent" data-astro-cid-gktyngjq data-astro-cid-xy2miwgi>  Cluster </span>  <h3 class="heading heading--lg" data-astro-cid-gktyngjq data-astro-cid-goh2lvqm> Two-node k3s + Longhorn </h3>  <p class="text text--default text--md" data-astro-cid-gktyngjq data-astro-cid-jsr45nuq> 
k3s keeps the control plane lightweight while Longhorn replicates every PVC, giving me
        instant failover for HAProxy, LibreChat, Vaultwarden, and more.
 </p>  </article> <article class="panel" data-astro-cid-gktyngjq> <span class="badge badge--neutral" data-astro-cid-gktyngjq data-astro-cid-xy2miwgi>  GitOps </span>  <h3 class="heading heading--lg" data-astro-cid-gktyngjq data-astro-cid-goh2lvqm> Argo CD app-of-apps </h3>  <p class="text text--default text--md" data-astro-cid-gktyngjq data-astro-cid-jsr45nuq> 
Every platform service and application is reconciled from Git. The <code data-astro-cid-gktyngjq>platform/test</code>
workloads smoke-test new nodes before promotion.
 </p>  </article> <article class="panel" data-astro-cid-gktyngjq> <span class="badge badge--accent" data-astro-cid-gktyngjq data-astro-cid-xy2miwgi>  AI Stack </span>  <h3 class="heading heading--lg" data-astro-cid-gktyngjq data-astro-cid-goh2lvqm> LibreChat + llama.cpp </h3>  <p class="text text--default text--md" data-astro-cid-gktyngjq data-astro-cid-jsr45nuq> 
Swapped out Ollama for a multi-node friendly llama.cpp deployment backed by MongoDB and
        Qdrant so conversational memory survives node loss.
 </p>  </article> </div> <div class="homelab-overview__note" data-astro-cid-gktyngjq> <h3 class="heading heading--lg" data-astro-cid-gktyngjq data-astro-cid-goh2lvqm> Ops snapshot </h3>  <p class="text text--muted text--md" data-astro-cid-gktyngjq data-astro-cid-jsr45nuq> 
MetalLB advertises services directly to my home network, HAProxy terminates TLS sourced from
      cert-manager, and nightly Longhorn backups land on the NAS. The result is a homelab that feels
      like a production platform without losing tinkering power.
 </p>  </div> </section>  </div> </div> </article> </main>  <footer class="site-footer" data-astro-cid-5qnl4gdb> <div class="container site-footer__inner" data-astro-cid-5qnl4gdb>  <div class="site-footer__meta" data-astro-cid-5qnl4gdb> <span data-astro-cid-5qnl4gdb>&copy; 2025 Ryan Rumana</span> <span data-astro-cid-5qnl4gdb>Built with Rust &amp; Astro</span> </div> <div class="site-footer__links" data-astro-cid-5qnl4gdb> <a href="mailto:ryan.rumana@gmail.com" data-astro-cid-5qnl4gdb>Email</a> <a href="https://linkedin.com/in/ryanrumana" target="_blank" rel="noopener noreferrer" data-astro-cid-5qnl4gdb>LinkedIn</a> <a href="https://github.com/rrumana" target="_blank" rel="noopener noreferrer" data-astro-cid-5qnl4gdb>GitHub</a> </div>  </div> </footer>  </body></html>  