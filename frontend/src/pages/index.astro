---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import PageSection from '../components/shell/PageSection.astro';
import Text from '../components/ui/Text.astro';
import Button from '../components/ui/Button.astro';
import GridSection from '../components/layouts/GridSection.astro';
import ProjectCard from '../components/cards/ProjectCard.astro';
import CallToAction from '../components/callouts/CallToAction.astro';
import SplitSection from '../components/layouts/SplitSection.astro';
import Hero from '../components/sections/Hero.astro';

const navLinks = [
  { href: '#about', label: 'About' },
  { href: '#projects', label: 'Projects' },
  { href: '/projects', label: 'All Work' },
  { href: '#contact', label: 'Contact' },
];

const projects = (await getCollection('projects')).filter((project) => project.data.featured);
projects.sort((a, b) => a.data.order - b.data.order);
---
<BaseLayout
  title="Ryan Rumana | Portfolio"
  description="Software engineer and platform builder focused on Rust, Kubernetes, and resilient homelab infrastructure."
  navLinks={navLinks}
>
  <main>
    <Hero
      eyebrow="Platform Engineer"
      title="Hi, I'm Ryan Rumana"
      description="I build resilient systems that blend Rust, Kubernetes, and automation—powering production-ready homelabs, WASM experiences, and AI workloads at the edge."
      primaryCta={{ label: 'Get in touch', href: '#contact' }}
      secondaryCta={{ label: 'Download résumé', href: '/assets/resume.pdf' }}
    />

    <PageSection
      id="about"
      title="About"
      description="Engineer, adventurer, and perpetual learner—rooted in Rust and inspired by the outdoors."
      variant="alt"
    >
      <SplitSection>
        <img
          slot="media"
          src="/images/profile.png"
          alt="Ryan Rumana portrait"
          width="450"
          height="350"
          loading="lazy"
        />
        <div class="about__copy">
          <Text>
            I'm a software engineer with roots in Tallahassee and degrees in Computer Science and Machine Learning from
            the Colorado School of Mines. I thrive on building—from Rust tooling and Kubernetes platforms to custom PCs
            and interactive experiments.
          </Text>
          <Text>
            When I'm not experimenting with infrastructure, you'll likely find me outside: hiking, snowboarding, or training
            for triathlons. That curiosity drives this site, where I share projects that combine performance, automation,
            and thoughtful design.
          </Text>
          <div class="about__actions">
            <Button href="/assets/resume.pdf">View résumé</Button>
            <Button href="mailto:ryan.rumana@gmail.com" variant="secondary">Contact</Button>
          </div>
        </div>
      </SplitSection>
    </PageSection>

    <PageSection
      id="projects"
      title="Featured projects"
      description="Select work that blends platform engineering rigor with hands-on experimentation."
    >
      <GridSection columns={3}>
        {projects.map((project) => (
          <ProjectCard
            title={project.data.title}
            summary={project.data.summary}
            techStack={project.data.techStack}
            media={project.data.heroImage}
            mediaAlt={project.data.heroAlt}
            cta={project.data.primaryAction}
            secondaryCta={project.data.secondaryAction}
          />
        ))}
      </GridSection>
    </PageSection>

    <CallToAction
      id="contact"
      eyebrow="Let’s talk"
      title="Interested in collaborating or trading homelab war stories?"
      description="I’m always open to comparing setups, chatting about Rust, or teaming up on platform engineering projects."
      actions={[
        { label: 'Email me', href: 'mailto:ryan.rumana@gmail.com' },
        { label: 'View GitHub', href: 'https://github.com/rrumana', variant: 'secondary' },
      ]}
    />

    <div aria-hidden="true"></div>
  </main>
</BaseLayout>

<style>
.about__copy {
  display: grid;
  gap: var(--space-md);
}

.about__actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
  margin-top: var(--space-md);
}
</style>
