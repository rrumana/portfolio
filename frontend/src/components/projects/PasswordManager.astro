---
import SectionShell from '../layout/SectionShell.astro';
import SurfaceCard from '../ui/SurfaceCard.astro';

export interface Props {
  id?: string;
}

const props = Astro.props as Props;
const { id = 'password-manager' } = props;
---
<SectionShell
  id={id}
  title="Rust Password Manager"
  description="A self-hosted vault that follows NIST SP 800-63 guidance, leans on Rust safety, and experiments with WebAuthn."
  accent
>
  <div class="grid">
    <SurfaceCard padding="lg" class="panel" id="crypto">
      <h3>Crypto Choices</h3>
      <ul>
        <li>Argon2id for key derivation with per-record nonces.</li>
        <li>Envelope encryption around credential blobs stored in Postgres.</li>
        <li>Structured auditing for login and recovery flows.</li>
      </ul>
    </SurfaceCard>
    <SurfaceCard padding="lg" class="panel" id="api">
      <h3>API & Guardrails</h3>
      <ul>
        <li>Axum API layers handle rate limits, sessions, and audit logs.</li>
        <li>WebAuthn experiments to remove password reliance for MFA.</li>
        <li>Threat modeling baked into ADRs so crypto decisions stay explicit.</li>
      </ul>
    </SurfaceCard>
    <SurfaceCard padding="lg" class="panel" id="roadmap">
      <h3>Roadmap</h3>
      <p>
        Next steps: finish WebAuthn, harden recovery, and ship a minimal UI. The repo documents decisions along the way so it stays self-hosted and transparent.
      </p>
      <a class="panel-link" href="https://github.com/rrumana/password-manager" target="_blank" rel="noopener noreferrer">
        View repository
      </a>
    </SurfaceCard>
  </div>
</SectionShell>

<style>
.grid {
  display: grid;
  gap: var(--space-xl);
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}

.panel {
  display: grid;
  gap: var(--space-sm);
}

.panel ul {
  margin: 0;
  padding-left: 1.1rem;
  color: var(--color-text-muted);
  display: grid;
  gap: var(--space-2xs);
}

.panel-link {
  font-weight: 600;
  color: var(--color-primary-500);
  text-decoration: none;
}

.panel-link:hover,
.panel-link:focus-visible {
  text-decoration: underline;
}
</style>
