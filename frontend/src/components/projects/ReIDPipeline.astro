---
import Heading from '../ui/Heading.astro';
import Text from '../ui/Text.astro';
import SplitSection from '../layouts/SplitSection.astro';
import { Image } from 'astro:assets';

export interface Props {
  id?: string;
  class?: string;
}

const props = Astro.props as Props & { [key: string]: unknown };
const { id, class: className = '', ...rest } = props;
---
<section id={id} class={`reid-pipeline ${className}`.trim()} {...rest}>
  <SplitSection>
    <Image
      slot="media"
      src="/images/test2.png"
      alt="Multi-camera re-identification pipeline"
      width={1366}
      height={767}
      loading="lazy"
      class="reid-pipeline__image"
    />
    <div class="reid-pipeline__content">
      <Heading level={3} size="lg">Edge-first architecture</Heading>
      <Text>
        EfficientNet-based embeddings run on NVIDIA Jetsons with TensorRT, pushing inference to the
        edge so cameras coordinate without saturating the network.
      </Text>
      <Heading level={4} size="md">GitOps delivery</Heading>
      <Text tone="muted">
        Kustomize overlays and Argo CD keep every camera node in sync. Updating an on-device model is
        as simple as merging a PR.
      </Text>
    </div>
  </SplitSection>
</section>

<style>
.reid-pipeline {
  display: grid;
  gap: var(--space-xl);
}

.reid-pipeline :global(img) {
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

html[data-theme='dark'] .reid-pipeline :global(img) {
  border: 1px solid var(--color-border-muted);
}
</style>
